<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Form</title>
		
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta charset="UTF-8">
		
		<link rel="stylesheet" href="style.css" >
	</head>

<body>
	<div class="StudDetail">
		<form name="form1" id="form1" onsubmit="checkDuplicate(event)">
		<h3>Student Details</h3>
			<div class="formalign">
			<label>Roll No</label>
			<input type="text" id="rollno" name="rollno" required>
			</div>
			
			<div class="formalign">
			<label>Name</label>
			<input type="text" name="studname" id="studname" required>
			</div>
			
			<div class="formalign">
			<label>Subjects</label>
				<select name="subjects" id="subjects" required multiple>
					<option value="WebTech">Web Technology</option>
					<option value="IoT">IoT</option>
					<option value="SE">SE</option>
					<option value="C">C</option>
					<option value="Java">Java</option>
					<option value="Graphics">Graphics</option>
					<option value="DS">DS</option>
				</select>
			</div>
			
			<div class="formalign radioInput">
			<label>Year</label>
				<input type="radio" name="batch" value="2016" checked>2016
				<input type="radio" name="batch" value="2017">2017
				<input type="radio" name="batch" value="2018">2018
			</div>
			
			<input type="submit" name="submitForm" value="Submit">
		</form>
	</div>
	
	<p id="demo"></p>
	<div class="data">
		<table id="details">
		<thead>
			<th>RollNo</th>
			<th>Name</th>
			<th>Subjects</th>
			<th>Year</th>
		</thead>
		<tbody>
			<tr>
				<td><span></td>
		</tbody>
		</table>
	</div>
	
	<script>
		function checkDuplicate(event){
            event.preventDefault();
            var form = document.getElementById("form1");
            var table = document.getElementById("details");
            var roll=form1["rollno"].value;
			var name =form1["studname"].value;
			var year = form1["batch"].value;
            var flag=0;
            var length=table.rows.length;
            console.log("I'm here");
            for (var x=1; x<length; x++) {
               
                var table_roll = table.rows[x].cells[0].textContent;
                if(table_roll==roll){
                    flag=1;
                    alert("Duplicate Data!");
                }
            } //for loop ends
            if (flag==0){
			var row=table.insertRow(-1);
			var cell1 = row.insertCell(0);
			var cell2 = row.insertCell(1);
			var cell3 = row.insertCell(2);
			var cell4 =row.insertCell(3);
			
			cell1.innerHTML=roll;
			cell2.innerHTML=name;
			cell3.innerHTML=getSelectValues(document.getElementById("subjects"));
			cell4.innerHTML=year;
            
            /* Select Code */
			function getSelectValues(select) {
				var selectedValues = [];
				var options = select && select.options;
				var opt;
				var length=options.length;
				for (var i=0; i<length; i++) {
					opt = options[i];

					if (opt.selected) {
						selectedValues.push(opt.value);
					}
				}
			  return selectedValues;
            }
        
        /* End of Select Code */
        }
            return true;
        }
			
	</script>
</body>
</html>